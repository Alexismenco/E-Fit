<%- include ("./partials/cabecera") %> 

<style>
.oval-line {
  width: 100%;
  height: 150px;
  border-bottom-left-radius: 40%;
  border-bottom-right-radius: 40%;
  background-color: rgb(18, 239, 18);
  border-bottom: 2px solid #000;


}

@media (min-width: 800px) {
    .container img{
        width: 75%;
    }
  }
@media (min-width: 700px) {
    .cont-img{
        margin-left: 300px !important;
    }
     .cont-img2{
        margin-right: 300px !important;
    }
  }

    
  .carousel-control-prev-icon,
    .carousel-control-next-icon {
        filter: invert(100%);
    }

    .carousel-control-prev,
    .carousel-control-next {
        color: black;
        background-color: transparent;
    }

    .carousel-control-prev:hover,
    .carousel-control-next:hover {
        color: black;
        background-color: rgba(0, 0, 0, 0.1);
    }
    
   
</style>

<!-- Menu arriba -->
<div class="oval-line">
    <div>
        <a href="">
            <img src="./perfil/<%- fotoPerfil %>" alt="" style="width: 50px; border-radius: 50%; margin-top:45px; margin-left: 20px;">
        </a>
    </div>

    <div class="text-center" style="margin-top: -70px;">
        <span style="font-weight: 800; font-size: 20px;">Pago</span>
    </div>
    <div class="text-center">
        <img class="" src="./logo/icon black.png" alt="" style="width: 60px;">
    </div>
    
    
    <div style="width: 100%; margin-top: -10px;">
        <div style="display: flex; justify-content: space-between;">
            <a href="#">
                <img class="cont-img" src="https://img.icons8.com/?size=512&id=2287GodioQ7D&format=png" alt="" style="width: 30px; margin-left: 70px;">
            </a>
        
            <a href="#">
                <img class="cont-img2" src="https://img.icons8.com/?size=512&id=Q4SSPv6y2vU9&format=png" alt="" style="width: 30px; margin-right: 70px;">
            </a>
        </div>
    </div>

            <!-- Boton volver -->
            <div style="width: 100%; margin-top: 40px;">
                <div style="display: flex; justify-content: space-between;">
                    <a href="/<%= planDeportes.sup?'suplementos':'maquinas'; %>" style="text-decoration: none; font-weight: 800; font-size: 25px;">
                        <img class="cont-img" src="https://img.icons8.com/?size=512&id=9045&format=png" alt="" style="width: 30px;margin-top: -12px;; margin-left: 10px;">
                        Volver
                    </a>
                </div>
            </div>
</div>

<!-- CSS -->
<style>
    .carousel-item img {
        width: 100%;
        border-radius: 20px;
    }
</style>

<!-- Card -->
<div class="text-dark contenedor-card" style="display: flex; flex-wrap: wrap; width: 100%; text-align: center; margin-top: 40px;">
    <form class="m-auto mt-5" action="/confirm" method="post">
        <p class="text-dark" style="font-weight: 800; font-size: 25px;"><%= planDeportes.nombre %></p>

        <div id="carousel" class="carousel slide" data-ride="carousel" data-interval="3000">
            <div class="carousel-inner">
                <% for (let i = 0; i < planDeportes.fotos.length; i++) { %>
                    <div class="carousel-item <%= i === 0 ? 'active' : '' %>">
                        <img src="./<%= planDeportes.sup?'suplementos':'productos'; %>/<%= planDeportes.fotos[i] %>" alt="">
                    </div>
                <% } %>
            </div>
            <a class="carousel-control-prev" href="#carousel" role="button" data-slide="prev">
                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                <span class="sr-only">Previous</span>
            </a>
            <a class="carousel-control-next" href="#carousel" role="button" data-slide="next">
                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                <span class="sr-only">Next</span>
            </a>
        </div>

        <p class="mt-3" style="font-weight: 800; font-size: 25px;">Descripci√≥n</p>
        <p class="text-dark" style="font-weight: 800; font-size: 20px;"><%= planDeportes.descripcion %></p>

        <% if (planDeportes.alternativas2 !== null) { %>
            <select name="alternativas" id="alternativas" class="form-select w-75 m-auto" onchange="actualizarPrecio(this.value)" >
                    <% const opciones = planDeportes.alternativas2.split(',');%>
                    <% for (let k = 0; k < opciones.length; k++) { %>
                        <option value="<%= opciones[k] %>"><%= opciones[k] %></option>
                    <% } %>
            </select>
        <% } %>
        <p class="segundo text-dark mt-3" style="font-weight: 800; font-size: 20px;" id="precioMostrado">Precio: $ <%= planDeportes.precio %></p>

        <br>
        <input class="btn btn-dark" type="number" id="id" name="id" value="<%= planDeportes.id %>"  hidden>
        <input class="btn btn-dark" type="text" id="sup" name="sup" value="<%= planDeportes.sup?'si':'no'; %>"  hidden>
        <input class="btn btn-dark" type="text" id="pPago" placeholder="Cantidad" name="monto" hidden >
        <button class="w-75 mt-5 btn btn-lg" type="submit" style="background-color: rgb(18, 239, 18); border-radius: 20px 20px 20px 20px; border: 2px solid #000;">Comprar</button>
    </form>
</div>

<!-- JavaScript -->
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js"></script>

<!-- Menu de abajo -->
 <div style="position: fixed; bottom: 50px; width: 100%; height: 50px;">
    <div style="display: flex; justify-content: space-between;">
      <a href="/">
        <img src="https://img.icons8.com/?size=512&id=BE56i0LQZMIW&format=png" alt="" style="width: 40px; margin-left: 45px;">
      </a>
  
      <a href="ajustes">
        <img src="https://img.icons8.com/?size=512&id=53420&format=png" alt="" style="width: 40px; margin-right: 45px;">
      </a>
    </div>
  </div>
  
<%- include ("./partials/pie") %> 

<script>
    var precioPago = document.getElementById('pPago');
    var precioPrincipal = "<%= planDeportes.precio %>";
    precioPago.value = precioPrincipal;
    
   function actualizarPrecio(selectedOption) {
        const precioMostrado = document.getElementById('precioMostrado');
        var precios = "<%= planDeportes.precio2 %>".split(',');
        var opciones = "<%= planDeportes.alternativas2 %>".split(",");

        var index = opciones.indexOf(selectedOption);
        if(index==0){
            precioMostrado.innerText = 'Precio: $ '+precioPrincipal;
            precioPago.value = precioPrincipal;
        }else{
            precioMostrado.innerText = 'Precio: $ '+precios[index-1];
            precioPago.value = precios[index-1];
        }
    }
</script>